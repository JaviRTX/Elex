<style>
  .borde-azul-redondeado {
    border: 2px solid darkblue;
    border-radius: 10px;

}

/* Estilo para el fondo oscuro detrás del modal */
.put-modal-background {
  position: fixed; /* Posición fija en toda la pantalla */
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.6); /* Fondo semitransparente */
  z-index: 1000; /* Asegúrate de que se muestre por encima de otros elementos */
  display: flex;
  justify-content: center;
  align-items: center;
}

/* Estilo para el contenido del modal */
.put-modal-content {
  background-color: #fff; /* Fondo blanco para el contenido del modal */
  padding: 20px;
  border-radius: 8px; /* Esquinas redondeadas */
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Sombra para dar profundidad */
  z-index: 1001; /* Asegúrate de que el contenido esté por encima del fondo */
  width: 50%; /* O ajusta según la anchura que prefieras */
}

/* Estilo para el botón de cierre */
.close-button {
  float: right;
  font-size: 1.5rem;
  font-weight: bold;
  cursor: pointer;
}


</style>

<section class="container mt-3">
  <h2>Expediente</h2>
  <br>
  <div class="row">
    <!-- Columna Izquierda: Formulario de Expedientes -->
    <div class="col-md-4 borde-azul-redondeado">
      <h4>Crear expediente</h4>
      <form [formGroup]="expedienteForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label for="codigo">Código:</label>
          <input type="text" class="form-control" id="codigo" formControlName="codigo">
        </div>
        <div class="form-group">
          <label for="fecha">Fecha:</label>
          <input type="date" class="form-control" id="fecha" formControlName="fecha">
        </div>
        <div class="form-group">
          <label for="estado">Estado:</label>
          <select class="form-control" id="estado" formControlName="estado">
            <option value="Pendiente">Pendiente</option>
            <option value="Enviado">Enviado</option>
            <option value="Erróneo">Erróneo</option>
          </select>
        </div>
        <div class="form-group">
          <label for="opciones">Opciones:</label>
          <input type="text" class="form-control" id="opciones" formControlName="opciones">
        </div>
        <div class="form-group">
          <label for="descripcion">Descripción:</label>
          <input type="text" class="form-control" id="descripcion" formControlName="descripcion">
        </div>
        <div class="form-group">
          <label for="tipo">Tipo:</label>
          <input type="number" class="form-control" id="tipo" formControlName="tipo">
        </div>
        <div class="form-check">
          <input type="checkbox" class="form-check-input" id="activo" formControlName="activo">
          <label class="form-check-label" for="activo">Activo</label>
        </div>
        <div class="form-group">
          <label for="descripcionActuacion">Descripción de la Actuación:</label>
          <input type="text" class="form-control" id="descripcionActuacion" formControlName="descripcionActuacion">
        </div>
        <div class="form-check">
          <input type="checkbox" class="form-check-input" id="finalizadoActuacion" formControlName="finalizadoActuacion">
          <label class="form-check-label" for="finalizadoActuacion">Finalizado Actuación</label>
        </div>
        <div class="form-group">
          <label for="fechaActuacion">Fecha de Actuación:</label>
          <input type="date" class="form-control" id="fechaActuacion" formControlName="fechaActuacion">
        </div>
        <div class="form-group">
          <label for="rutaDocumento">Ruta del Documento:</label>
          <input type="text" class="form-control" id="rutaDocumento" formControlName="rutaDocumento">
        </div>
        <div class="form-group">
          <label for="tasaDocumento">Tasa del Documento:</label>
          <input type="number" class="form-control" id="tasaDocumento" formControlName="tasaDocumento">
        </div>
        <br/>
        <button type="submit" class="btn btn-primary">Crear Expediente</button>
      </form>
      <br>
    </div>

    <!-- Columna Derecha: Búsqueda de Expedientes y Componentes de Gestión -->
    <div class="col-md-8">
      <form [formGroup]="busquedaForm" (ngSubmit)="buscarExpediente()">
        <div class="form-group">
          <label for="codigo">Búsqueda de expediente por código</label>
          <input type="text" id="codigo" class="form-control" formControlName="codigo" placeholder="Ingrese el código">
        </div>
        <br>
        <button type="submit" class="btn btn-primary">Buscar</button>
      </form>

      <!-- Mostrar los detalles del expediente encontrado -->
      <div *ngIf="expedienteEncontrado" class="mt-3">
        <h5>Detalles del Expediente</h5>
        <p><strong>Id:</strong> {{ expedienteEncontrado.id }}</p>
        <p><strong>Código:</strong> {{ expedienteEncontrado.codigo }}</p>
        <p><strong>Fecha:</strong> {{ expedienteEncontrado.fecha | date:'mediumDate' }}</p>
        <p><strong>Estado:</strong> {{ expedienteEncontrado.estado }}</p>
        <p><strong>Descripción:</strong> {{ expedienteEncontrado.descripcion }}</p>
        <!-- Añade más detalles del expediente si lo deseas -->
      </div>
      <section>
        <!-- Botón para abrir el modal -->
<button class="btn btn-primary" (click)="abrirPutModalExpediente()">Actualizar Expediente</button>

<!-- Modal para actualizar un expediente -->
<div *ngIf="mostrarPutModalExpediente" class="modal fade show d-block" style="background-color: rgba(0, 0, 0, 0.6);">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Actualizar Expediente</h5>
        <button type="button" class="btn-close" aria-label="Close" (click)="cerrarPutModalExpediente()"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="expedienteForm">
          <!-- Id (generalmente no editable, pero se muestra en el formulario) -->
          <div class="mb-3">
            <label for="id" class="form-label">Id:</label>
            <input type="text" class="form-control" id="id" formControlName="id" readonly>
          </div>

          <!-- Código -->
          <div class="mb-3">
            <label for="codigo" class="form-label">Código:</label>
            <input type="text" class="form-control" id="codigo" formControlName="codigo">
          </div>

          <!-- Fecha -->
          <div class="mb-3">
            <label for="fecha" class="form-label">Fecha:</label>
            <input type="date" class="form-control" id="fecha" formControlName="fecha">
          </div>

          <!-- Estado -->
          <div class="mb-3">
            <label for="estado" class="form-label">Estado:</label>
            <select class="form-control" id="estado" formControlName="estado">
              <option value="Pendiente">Pendiente</option>
              <option value="Enviado">Enviado</option>
              <option value="Erróneo">Erróneo</option>
            </select>
          </div>

          <!-- Opciones -->
          <div class="mb-3">
            <label for="opciones" class="form-label">Opciones:</label>
            <input type="text" class="form-control" id="opciones" formControlName="opciones">
          </div>

          <!-- Descripción -->
          <div class="mb-3">
            <label for="descripcion" class="form-label">Descripción:</label>
            <textarea class="form-control" id="descripcion" formControlName="descripcion"></textarea>
          </div>

          <!-- Tipo -->
          <div class="mb-3">
            <label for="tipo" class="form-label">Tipo:</label>
            <input type="number" class="form-control" id="tipo" formControlName="tipo">
          </div>

          <!-- Activo -->
          <div class="mb-3 form-check">
            <input type="checkbox" class="form-check-input" id="activo" formControlName="activo">
            <label class="form-check-label" for="activo">Activo</label>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="cerrarPutModalExpediente()">Cancelar</button>
        <button type="button" class="btn btn-success" (click)="actualizarExpediente()">Guardar Cambios</button>
      </div>
    </div>
  </div>
</div>

      </section>

      <section>
      <button class="btn btn-secondary mt-3" (click)="consultarExpedientes()">
        Consultar Expedientes
      </button>
      <div *ngIf="expedientes.length > 0" class="mt-3 table-responsive">
        <table class="table">
          <thead>
            <tr>
              <th>Id</th>
              <th>Código</th>
              <th>Fecha</th>
              <th>Estado</th>
              <th>Opciones</th>
              <th>Descripción</th>
              <th>Tipo</th>
              <th>Activo</th>
              <th>Finalizado Actuación</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let expediente of expedientes">
              <td>{{ expediente.id }}</td>
              <td>{{ expediente.codigo }}</td>
              <td>{{ expediente.fecha | date }}</td>
              <td>{{ expediente.estado }}</td>
              <td>{{ expediente.opciones }}</td>
              <td>{{ expediente.descripcion }}</td>
              <td>{{ expediente.tipo }}</td>
              <td>{{ expediente.activo ? 'Sí' : 'No' }}</td>
              <td>{{ expediente.finalizadoActuacion ? 'Sí' : 'No' }}</td>
              <td>
                <button class="btn btn-danger" (click)="borrarLogico(expediente.id)">
                  Borrar
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
    </div>
  </div>
</section>
